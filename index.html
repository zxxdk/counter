<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>计算机</title>
<link rel="stylesheet" href="css.css">
<!--[if lt IE 9]>
<link rel="stylesheet" type="text/css" href="a.css">
<![endif]-->

<!--[if IE]>
<script src="html5.js"></script>
<![endif]-->

</head>

<body>
<div class=wrapper>
<table class="co">
   
    <tr><td colspan=4><input  type="text" name ="number" id="number" value=""></td></tr>
    <tr><td><button type="button" value="sin" onclick="inputPCB(this)">sin</button></td>
    <td><button type="button" value="cos" onclick="inputPCB(this)">cos</button></td>
    <td><button type="button" value="log" onclick="inputPCB(this)">log</button></td>
    <td><button type="button" value="=" onclick="inputEquel(this)">=</button></td></tr>
    <tr><td><button type="button" value="7" onclick="inputEvent(this)">7</button></td>
    <td><button type="button" value="8" onclick="inputEvent(this)">8</button></td>
    <td><button type="button" value="9" onclick="inputEvent(this)">9</button></td>
    <td><button type="button" value="+" onclick="inputOper(this)">+</button></td></tr>
    <tr><td><button type="button" value="4" onclick="inputEvent(this)">4</button></td>
    <td><button type="button" value="5" onclick="inputEvent(this)">5</button></td>
    <td><button type="button" value="6" onclick="inputEvent(this)">6</button></td>
    <td><button type="button" value="-" onclick="inputOper(this)">-</button></td></tr>
    <tr><td><button type="button" value="1" onclick="inputEvent(this)">1</button></td>
    <td><button type="button" value="2" onclick="inputEvent(this)">2</button></td>
    <td><button type="button" value="3" onclick="inputEvent(this)">3</button></td>
    <td><button type="button" value="*" onclick="inputOper(this)">*</button></td></tr>
    <tr><td><button type="button" value="0" onclick="inputEvent(this)">0</button></td>
    <td><button type="button" value="C" onclick="inputPCB(this)">C</button></td>
    <td><button type="button" value="." onclick="inputEvent(this)">.</button></td>
    <td><button type="button" value="÷" onclick="inputOper(this)">÷</button></td></tr>

</table>
</div>
<script type="text/javascript">
   /*定义全局变量*/
    var val=0; //放置输入的值
    var xval=0;//保存转换Number类型的值
    var temp=0; //保存第一次输入的值    
    var char="";//保存输入的操作符
    var num1="";
    var num2="";
    var ope;
    

    
   //计算器计算部分
    function counter(num1,num2,char){
	   	var result=0;
	   	
	   	switch(char){
	   		case "+":result=num1+num2;break;
	   		case "-":result=num1-num2;break;
	   		case "*":result=num1*num2;break;
	   		case "÷":
	   		if(num2 == 0)
	   		  alert("被除数不能为零");
	   		   

	   		else
	   			result=num1/num2;
	   		break;
	   		
	   	}
	   	result=parseFloat(result.toFixed(6));
	   	return result;
   
   }
   /*获取输入数字*/
     function inputEvent(e){
        val=e.value
        var xsval=document.getElementById("number");
        if(xsval.value.indexOf('.')>-1)
        {
        	if(val == '.'){
              alert("不能再输入小数点了");
              xsval.value=xsval.value;
        	}else{
        		xsval.value+=val;
        	}
           

        	//alert("不能再输入小数点了");
        	
        }else{
        	xsval.value+=val;
        }
         //连续输入数字(String类型)
        
        //转换Number类型
        xval=parseFloat(xsval.value);

         
    }
    /*输入操作符*/
     function inputOper(e){

        char=e.value;
         //window.alert(typeof oper);
         //oper=oper.substr(0);
         if (e.value=="+"){
             var xsval=document.getElementById("number");
             //保存上次计算结果，并对字符串进行转换Number类型
            temp=parseFloat(xsval.value);
             //第一次输入的值设置为空
            xsval.value="";                        
         }else if(e.value=="-"){
             var xsval=document.getElementById("number");
             temp=parseFloat(xsval.value);
             xsval.value="";
         }else if(e.value=="*"){
             var xsval=document.getElementById("number");
             temp=parseFloat(xsval.value);
             xsval.value="";
         }else if(e.value=="÷"){
             var xsval=document.getElementById("number");
             temp=parseFloat(xsval.value);
             xsval.value="";
         }
     }
    
     /*计算结果*/
     function inputEquel(e){

        var xsval=document.getElementById("number");        
         if(e.value=="="){
             //window.alert(xval);
             //调用对象方法
            xsval.value=counter(temp,xval,char);
         }
     }
    
     /*获取第一行的数据*/
     function inputPCB(e){
         //window.alert(e.value);
         var xsval=document.getElementById("number");
         if(e.value=="C"){
            xsval.value="";
         }else if(e.value=="sin"){
            xsval.value=Math.sin(xsval.value*Math.PI/180); 
            xsval.value=parseFloat(xsval.value.toFixed(5));
        }else if(e.value=="cos"){
             //计算sin值
            xsval.value=Math.cos(xsval.value*Math.PI/180);  
            xsval.value=parseFloat(xsval.value.toFixed(5));     
        }else if(e.value =="log"){
        	xsval.value=Math.log(xsval.value);
        	xsval.value=parseFloat(xsval.value.toFixed(5));
        }
     }


</script>
</body>
</html>
